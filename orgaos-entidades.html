<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>SP</title>
    <!-- CSS Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Bootstrap Icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <!-- CSS Project -->
    <link href="./css/styles.css" rel="stylesheet" />
    <!-- Javascript Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
        integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Javascript Project -->
    <script src="./scripts/script.js"></script>
    <script>
        $(document).ready(function () {

            // count total checkbox selected
            $('.total-checkbox-selected').text(0);
            $('input[type="checkbox"]').each(function () {
                $(this).click(function () {
                    var selected_grid = $(this).closest('.grid-item-column');
                    var total_checkbox_selected = selected_grid.find('input[type="checkbox"]:checked').length;
                    selected_grid.find('.total-checkbox-selected')
                        .text(total_checkbox_selected);
                });
            });
            // show box with checkbox 
            $('.bi-chevron-compact-down').each(function () {
                $(this).click(function () {
                    $('.grid-item-select').css({ "visibility": "hidden" });
                    var selected_grid = $(this).closest(".grid-item-column");

                    selected_grid.find('.grid-item-title')
                        .css({"left": getLeftPositionTotalCheckbox(selected_grid)});
                    selected_grid.find('.grid-item-select')
                        .css({
                            "visibility": "visible",
                            "top": selected_grid.position().top - 48,
                            "left": getLeftPositionGrid(selected_grid),
                            "width": getWidthGrid(selected_grid)
                        });
                });
            });
            // hidden box with checkbox
            $('.bi-chevron-compact-up').each(function () {
                $(this).click(function () {
                    var selected_grid = $(this).closest(".grid-item-column");
                    selected_grid.find('.grid-item-select').css({ "visibility": "hidden" });
                });
            });

            function getWidthGrid(selected_grid) {
                var total_checkbox = selected_grid.find('input[type=checkbox]').length;
                if (total_checkbox == 1) {
                    return 322;
                } else if (total_checkbox == 2) {
                    return 666;
                }
                return 1012;
            }

            function getLeftPositionGrid(selected_grid) {
                var position = selected_grid.position();
                var total_checkbox = selected_grid.find('input[type=checkbox]').length;
                if (total_checkbox == 1) {
                    return position.left;
                } else if (total_checkbox == 2) {
                    var index = selected_grid.index() + 1;
                    if (index % 3 === 0) {
                        return 356;
                    }
                }
                return 12;
            }

            function getLeftPositionTotalCheckbox(selected_grid) {
                var position = selected_grid.position();
                var total_checkbox = selected_grid.find('input[type=checkbox]').length;
                if (total_checkbox == 2) {
                    var index = selected_grid.index() + 1;
                    if (index % 3 === 0) {
                        return 350;
                    }
                }
                return selected_grid.position().left;
            }
        });
    </script>
</head>

<body>
    <!-- HEADER -->
    <div id="import-header"></div>
    <!-- CONTENT -->
    <div class="container">
        <div class="row" id="identification-bar">
            <div class="col profile d-flex justify-content-center">
                <img src="images/etiqueta-perfil.svg" alt="Perfil" />
            </div>
        </div>
    </div>
    <div class="container" style="min-height:50vh">
        <form class=" justify-content-start">
            <div id="content">
                <div class="row ps-4 pe-4">
                    <div class="col-md-12 mx-auto mt-3 title font-big">
                        Requisite seus dados pessoais
                    </div>
                    <div class="col-md-12 mx-auto mb-4 mt-3">
                        <div class="form-group ">
                            <label for="entidade" class="font-medium">Selecione os Órgãos e Entidades abaixo que deseja
                                requisitar<br />seus dados pessoais</label>
                            <input type="text" class="form-control mt-1" id="entidade" style="width: 440px;"
                                placeholder="Pesquise as entidades e órgãos que deseja encontrar">
                        </div>
                    </div>
                    <div class="col-md-12 mx-auto mb-1 title font-big">
                        Órgãos e Entidades
                    </div>
                    <div class="col-md-12 mx-auto nopadding">
                        <div class="grid-item-row">
                            <!-- INICIO repetir column para criar proximo box--->
                            <div class="grid-item-column">
                                <div class="row h-100">
                                    <div class="col-sm-9 my-auto"> CASA CIVIL</div>
                                    <div class="col-sm-1 my-auto text-end total-checkbox-selected">
                                    </div>
                                    <div class="col-sm-2 my-auto">
                                        <a href="#"><i class="bi bi-chevron-compact-down black"
                                                style="font-size: 22px"></i></a>
                                    </div>
                                </div>
                                <div class="grid-item-select mt-5">
                                    <div class="row ps-1 pt-3 pb-1">
                                        <div class="col-sm-12 my-auto" style="position: relative;">
                                            <div class="grid-item-title">
                                                <div class="row h-100">
                                                    <div class="col-sm-9 my-auto"> CASA CIVIL</div>
                                                    <div class="col-sm-1 my-auto text-end total-checkbox-selected">
                                                    </div>
                                                    <div class="col-sm-2 my-auto">
                                                        <a href="#"><i class="bi bi-chevron-compact-up black"
                                                                style="font-size: 22px"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="grid-input-row mt-4">
                                        <!-- INICIO repetir column para criar proximo checkbox--->
                                        <div class="grid-input-column">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input custom-input-switch" type="checkbox"
                                                    id="flexSwitchCheckDefault">
                                                <label class="form-check-label font-medium"
                                                    for="flexSwitchCheckDefault">SECRETARIA DA EDUCAÇÃO
                                                </label>
                                            </div>
                                        </div>
                                        <!-- FIM repetir column para criar proximo checkbox--->
                                    </div>
                                </div>
                            </div>
                            <!-- FIM repetir column para criar proximo box--->
                        </div>
                    </div>
                    <div class="col-md-12 mx-auto mt-5 mb-5 text-center">
                        <button type="button btn-sm" class="btn btn-primary font-medium" data-bs-dismiss="modal"
                            style=" width: 171px;">Enviar formulário</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <!-- FOOTER -->
    <div id="import-footer"></div>
</body>

</html>